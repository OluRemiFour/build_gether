import { Trace, Span, Opik } from 'opik';

type OpikParent = Trace | Span;
type TrackOpikConfig = {
    /**
     * Project name for this trace
     */
    projectName?: string;
    /**
     * Parent span or trace for this generation
     */
    parent?: OpikParent;
    /**
     * Generation name (defaults to "ClassName.methodName")
     */
    generationName?: string;
    /**
     * Trace metadata (tags, custom fields)
     */
    traceMetadata?: Record<string, unknown> & {
        tags?: string[];
    };
    /**
     * Opik client instance
     */
    client?: Opik;
};
type OpikExtension = {
    /**
     * Flush all pending traces and spans to Opik backend
     */
    flush: () => Promise<void>;
};

/**
 * Track Gemini client with Opik observability
 *
 * Wraps a Gemini SDK instance (GoogleGenerativeAI or any Gemini client) to automatically
 * create traces and spans for all generation calls.
 *
 * @param sdk - The Gemini SDK instance to track
 * @param opikConfig - Configuration for Opik tracking
 * @returns Proxied SDK instance with flush() method
 *
 */
declare const trackGemini: <SDKType extends object>(sdk: SDKType, opikConfig?: TrackOpikConfig) => SDKType & OpikExtension;

export { trackGemini };
